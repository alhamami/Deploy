<!DOCTYPE html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta charset="utf-8">
    <title>Reset Password</title>
    <link rel="shortcut icon" href="/static/img/favicon.ico">
    <link rel="stylesheet" href="/static/css/reset2.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    
    <div class="container">
        <img class="logo" src="/static/img/logo.png">
        <form class="form" action="{{url_for('resetAccount')}}"  method="POST">

            <h1 class="form__title">Reset Password</h1>

            <div class="form__message form__message--error"></div>

            <div class="form__input-group">
                <input type="password" class="form__input" id="password" autofocus placeholder="Enter Password" name="password">
                <div class="form__input-error-message"></div>
            </div>

            <div class="form__input-group">
                <input type="password" class="form__input" id="cpassword" autofocus placeholder="Enter Confirm Password" name="cpassword">
                <div class="form__input-error-message"></div>
            </div>

            <input class="reset_button" type="button" value="NEXT" onclick="check()">
            <input class="email" name="email" value="{{ email }}">
        </form>



        <div class="background">
            <img src="/static/img/image-11.png">
        </div>
        
        <form action="{{url_for('index')}}">
            <div class="exit" >
              <img      height="35px" width="35px" src="/static/img/home.png">
            </div>

            <input class="exitbtn" type="submit" value="">
        </form>


    </div>
    <script src="/static/js/main.js"></script>
    <script>

            function check(){

                var passwordSpace = /\s/g.test($('[id$=password]').val());
                var cpasswordSpace = /\s/g.test($('[id$=cpassword]').val());
    
                var password = document.getElementById("password")
                var cpassword = document.getElementById("cpassword")

                let strongPassword = new RegExp('(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})')            


                if(password.value == ""){
                    alert("You must enter the password !");
                }else if ((password.value.indexOf(' ') >= 0) || (cpassword.value.indexOf(' ') >= 0)) {
                    alert("Password must not contain space");
                }else if(password.value.length < 8){
                    alert("Password must contain at least 8 character's");
                }else if(!strongPassword.test(password.value)) {
                    alert("Password must contain at least one capital letter, symbol and number");
                }else if(cpassword.value == ""){
                    alert("You must enter the confirm password !");
                }else if(password.value != cpassword.value ){
                    alert("Password does not match !");
                }else if (password.value == cpassword.value){
                    alert("Password changed successfully !");
                    $("input[class='reset_button']").prop("type", "submit");
                }
            }

            
        var size = (((window.screen.width - window.screen.height ) / 100 ) / 0.1)
        plus  =  ((1.7 / 100 ) * 1000) - 5
        if (window.screen.width> 2000){
            size = size - plus
        }else{
            size = size - plus + 3
        }

        $("html").css("zoom",size+"%")
      

    </script>

</body>
